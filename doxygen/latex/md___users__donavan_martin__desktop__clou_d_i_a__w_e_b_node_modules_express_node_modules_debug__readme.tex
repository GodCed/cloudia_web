tiny node.\+js debugging utility modelled after node core\textquotesingle{}s debugging technique.

\subsection*{Installation}


\begin{DoxyCode}
1 $ npm install debug
\end{DoxyCode}


\subsection*{Usage}

With {\ttfamily debug} you simply invoke the exported function to generate your debug function, passing it a name which will determine if a noop function is returned, or a decorated {\ttfamily console.\+error}, so all of the {\ttfamily console} format string goodies you\textquotesingle{}re used to work fine. \hyperlink{class_a}{A} unique color is selected per-\/function for visibility.

\hyperlink{struct_example}{Example} {\itshape app.\+js}\+:


\begin{DoxyCode}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} debug = require(\textcolor{stringliteral}{'debug'})(\textcolor{stringliteral}{'http'})
  , http = require(\textcolor{stringliteral}{'http'})
  , name = \textcolor{stringliteral}{'My App'};

\textcolor{comment}{// fake app}

\hyperlink{addon_2doxmlparser_2src_2debug_8cpp_a0a777024bcc965d6200d9599eb187cd9}{debug}(\textcolor{stringliteral}{'booting %s'}, name);

http.createServer(\textcolor{keyword}{function}(req, res)\{
  \hyperlink{addon_2doxmlparser_2src_2debug_8cpp_a0a777024bcc965d6200d9599eb187cd9}{debug}(req.method + \textcolor{charliteral}{' '} + req.url);
  res.end(\textcolor{stringliteral}{'hello\(\backslash\)n'});
\}).listen(3000, \textcolor{keyword}{function}()\{
  \hyperlink{addon_2doxmlparser_2src_2debug_8cpp_a0a777024bcc965d6200d9599eb187cd9}{debug}(\textcolor{stringliteral}{'listening'});
\});

\textcolor{comment}{// fake worker of some kind}

require(\textcolor{stringliteral}{'./worker'});
\end{DoxyCode}


\hyperlink{struct_example}{Example} {\itshape worker.\+js}\+:


\begin{DoxyCode}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} debug = require(\textcolor{stringliteral}{'debug'})(\textcolor{stringliteral}{'worker'});

setInterval(\textcolor{keyword}{function}()\{
  \hyperlink{addon_2doxmlparser_2src_2debug_8cpp_a0a777024bcc965d6200d9599eb187cd9}{debug}(\textcolor{stringliteral}{'doing some work'});
\}, 1000);
\end{DoxyCode}


The {\bfseries D\+E\+B\+U\+G} environment variable is then used to enable these based on space or comma-\/delimited names. Here are some examples\+:





\paragraph*{Windows note}

On Windows the environment variable is set using the {\ttfamily set} command.


\begin{DoxyCode}
1 set DEBUG=*,-not\_this
\end{DoxyCode}


Then, run the program to be debugged as usual.

\subsection*{Millisecond diff}

When actively developing an application it can be useful to see when the time spent between one {\ttfamily \hyperlink{addon_2doxmlparser_2src_2debug_8cpp_a0a777024bcc965d6200d9599eb187cd9}{debug()}} call and the next. Suppose for example you invoke {\ttfamily \hyperlink{addon_2doxmlparser_2src_2debug_8cpp_a0a777024bcc965d6200d9599eb187cd9}{debug()}} before requesting a resource, and after as well, the \char`\"{}+\+N\+N\+Nms\char`\"{} will show you how much time was spent between calls.



When stdout is not a T\+T\+Y, {\ttfamily Date\+::to\+U\+T\+C\+String()} is used, making it more useful for logging the debug information as shown below\+:



\subsection*{Conventions}

If you\textquotesingle{}re using this in one or more of your libraries, you {\itshape should} use the name of your library so that developers may toggle debugging as desired without guessing names. If you have more than one debuggers you {\itshape should} prefix them with your library name and use \char`\"{}\+:\char`\"{} to separate features. For example \char`\"{}body\+Parser\char`\"{} from Connect would then be \char`\"{}connect\+:body\+Parser\char`\"{}.

\subsection*{Wildcards}

The {\ttfamily $\ast$} character may be used as a wildcard. Suppose for example your library has debuggers named \char`\"{}connect\+:body\+Parser\char`\"{}, \char`\"{}connect\+:compress\char`\"{}, \char`\"{}connect\+:session\char`\"{}, instead of listing all three with {\ttfamily D\+E\+B\+U\+G=connect\+:body\+Parser,connect.\+compress,connect\+:session}, you may simply do {\ttfamily D\+E\+B\+U\+G=connect\+:$\ast$}, or to run everything using this module simply use {\ttfamily D\+E\+B\+U\+G=$\ast$}.

You can also exclude specific debuggers by prefixing them with a \char`\"{}-\/\char`\"{} character. For example, {\ttfamily D\+E\+B\+U\+G=$\ast$,-\/connect\+:$\ast$} would include all debuggers except those starting with \char`\"{}connect\+:\char`\"{}.

\subsection*{Browser support}

\hyperlink{class_debug}{Debug} works in the browser as well, currently persisted by {\ttfamily local\+Storage}. Consider the situation shown below where you have {\ttfamily worker\+:a} and {\ttfamily worker\+:b}, and wish to debug both. Somewhere in the code on your page, include\+:


\begin{DoxyCode}
window.myDebug = require(\textcolor{stringliteral}{"debug"});
\end{DoxyCode}


(\char`\"{}debug\char`\"{} is a global object in the browser so we give this object a different name.) When your page is open in the browser, type the following in the console\+:


\begin{DoxyCode}
myDebug.enable(\textcolor{stringliteral}{"worker:*"})
\end{DoxyCode}


Refresh the page. \hyperlink{class_debug}{Debug} output will continue to be sent to the console until it is disabled by typing {\ttfamily my\+Debug.\+disable()} in the console.


\begin{DoxyCode}
\hyperlink{058__bracket__recursion_8tcl_ab08ae027fc5777bc4f0629f1b60b35db}{a} = \hyperlink{addon_2doxmlparser_2src_2debug_8cpp_a0a777024bcc965d6200d9599eb187cd9}{debug}(\textcolor{stringliteral}{'worker:a'});
\hyperlink{058__bracket__recursion_8tcl_a68bdb74c144118d936931c46f75d4b3e}{b} = \hyperlink{addon_2doxmlparser_2src_2debug_8cpp_a0a777024bcc965d6200d9599eb187cd9}{debug}(\textcolor{stringliteral}{'worker:b'});

setInterval(\textcolor{keyword}{function}()\{
  \hyperlink{058__bracket__recursion_8tcl_ab08ae027fc5777bc4f0629f1b60b35db}{a}(\textcolor{stringliteral}{'doing some work'});
\}, 1000);

setInterval(\textcolor{keyword}{function}()\{
  \hyperlink{058__bracket__recursion_8tcl_a68bdb74c144118d936931c46f75d4b3e}{b}(\textcolor{stringliteral}{'doing some work'});
\}, 1200);
\end{DoxyCode}


\paragraph*{Web Inspector Colors}

Colors are also enabled on \char`\"{}\+Web Inspectors\char`\"{} that understand the {\ttfamily c} formatting option. These are Web\+Kit web inspectors, Firefox (\href{https://hacks.mozilla.org/2014/05/editable-box-model-multiple-selection-sublime-text-keys-much-more-firefox-developer-tools-episode-31/}{\tt since version 31}) and the Firebug plugin for Firefox (any version).

Colored output looks something like\+:



\subsubsection*{stderr vs stdout}

You can set an alternative logging method per-\/namespace by overriding the {\ttfamily log} method on a per-\/namespace or globally\+:

\hyperlink{struct_example}{Example} {\itshape stdout.\+js}\+:


\begin{DoxyCode}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} debug = require(\textcolor{stringliteral}{'debug'});
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} error = \hyperlink{addon_2doxmlparser_2src_2debug_8cpp_a0a777024bcc965d6200d9599eb187cd9}{debug}(\textcolor{stringliteral}{'app:error'});

\textcolor{comment}{// by default stderr is used}
error(\textcolor{stringliteral}{'goes to stderr!'});

\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} log = \hyperlink{addon_2doxmlparser_2src_2debug_8cpp_a0a777024bcc965d6200d9599eb187cd9}{debug}(\textcolor{stringliteral}{'app:log'});
\textcolor{comment}{// set this namespace to log via console.log}
log.log = console.log.bind(console); \textcolor{comment}{// don't forget to bind to console!}
log(\textcolor{stringliteral}{'goes to stdout'});
error(\textcolor{stringliteral}{'still goes to stderr!'});

\textcolor{comment}{// set all output to go via console.info}
\textcolor{comment}{// overrides all per-namespace log settings}
debug.log = console.info.bind(console);
error(\textcolor{stringliteral}{'now goes to stdout via console.info'});
log(\textcolor{stringliteral}{'still goes to stdout, but via console.info now'});
\end{DoxyCode}


\subsection*{Authors}


\begin{DoxyItemize}
\item T\+J Holowaychuk
\item Nathan Rajlich
\end{DoxyItemize}

\subsection*{License}

(The M\+I\+T License)

Copyright (c) 2014 T\+J Holowaychuk $<$\href{mailto:tj@vision-media.ca}{\tt tj@vision-\/media.\+ca}$>$

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \textquotesingle{}Software\textquotesingle{}), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions\+:

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

T\+H\+E S\+O\+F\+T\+W\+A\+R\+E I\+S P\+R\+O\+V\+I\+D\+E\+D \textquotesingle{}A\+S I\+S\textquotesingle{}, W\+I\+T\+H\+O\+U\+T W\+A\+R\+R\+A\+N\+T\+Y O\+F A\+N\+Y K\+I\+N\+D, E\+X\+P\+R\+E\+S\+S O\+R I\+M\+P\+L\+I\+E\+D, I\+N\+C\+L\+U\+D\+I\+N\+G B\+U\+T N\+O\+T L\+I\+M\+I\+T\+E\+D T\+O T\+H\+E W\+A\+R\+R\+A\+N\+T\+I\+E\+S O\+F M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+T\+Y, F\+I\+T\+N\+E\+S\+S F\+O\+R \hyperlink{class_a}{A} P\+A\+R\+T\+I\+C\+U\+L\+A\+R P\+U\+R\+P\+O\+S\+E A\+N\+D N\+O\+N\+I\+N\+F\+R\+I\+N\+G\+E\+M\+E\+N\+T. I\+N N\+O E\+V\+E\+N\+T S\+H\+A\+L\+L T\+H\+E A\+U\+T\+H\+O\+R\+S O\+R C\+O\+P\+Y\+R\+I\+G\+H\+T H\+O\+L\+D\+E\+R\+S B\+E L\+I\+A\+B\+L\+E F\+O\+R A\+N\+Y C\+L\+A\+I\+M, D\+A\+M\+A\+G\+E\+S O\+R O\+T\+H\+E\+R L\+I\+A\+B\+I\+L\+I\+T\+Y, W\+H\+E\+T\+H\+E\+R I\+N A\+N A\+C\+T\+I\+O\+N O\+F C\+O\+N\+T\+R\+A\+C\+T, T\+O\+R\+T O\+R O\+T\+H\+E\+R\+W\+I\+S\+E, A\+R\+I\+S\+I\+N\+G F\+R\+O\+M, O\+U\+T O\+F O\+R I\+N C\+O\+N\+N\+E\+C\+T\+I\+O\+N W\+I\+T\+H T\+H\+E S\+O\+F\+T\+W\+A\+R\+E O\+R T\+H\+E U\+S\+E O\+R O\+T\+H\+E\+R D\+E\+A\+L\+I\+N\+G\+S I\+N T\+H\+E S\+O\+F\+T\+W\+A\+R\+E. 