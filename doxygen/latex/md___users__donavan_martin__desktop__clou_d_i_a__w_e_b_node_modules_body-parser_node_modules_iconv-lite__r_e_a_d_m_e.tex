
\begin{DoxyItemize}
\item Doesn\textquotesingle{}t need native code compilation. Works on Windows and in sandboxed environments like \href{http://c9.io}{\tt Cloud9}.
\item Used in popular projects like \href{https://github.com/expressjs/body-parser}{\tt Express.\+js (body\+\_\+parser)}, \href{http://gruntjs.com/}{\tt Grunt}, \href{http://www.nodemailer.com/}{\tt Nodemailer}, \href{http://yeoman.io/}{\tt Yeoman} and others.
\item Faster than \href{https://github.com/bnoordhuis/node-iconv}{\tt node-\/iconv} (see below for performance comparison).
\item Intuitive encode/decode A\+P\+I
\item Streaming support for Node v0.\+10+
\item Can extend Node.\+js primitives (buffers, streams) to support all iconv-\/lite encodings.
\item In-\/browser usage via \href{https://github.com/substack/node-browserify}{\tt Browserify} ($\sim$180k gzip compressed with Buffer shim included).
\item License\+: M\+I\+T.
\end{DoxyItemize}

\href{https://npmjs.org/packages/iconv-lite/}{\tt !\mbox{[}N\+P\+M Stats\mbox{]}(https\+://nodei.\+co/npm/iconv-\/lite.\+png?downloads=true\&download\+Rank=true)}

\subsection*{Usage}

\#\#\# Basic A\+P\+I 
\begin{DoxyCode}
1 var iconv = require('iconv-lite');
2 
3 // Convert from an encoded buffer to js string.
4 str = iconv.decode(new Buffer([0x68, 0x65, 0x6c, 0x6c, 0x6f]), 'win1251');
5 
6 // Convert from js string to an encoded buffer.
7 buf = iconv.encode("Sample input string", 'win1251');
8 
9 // Check if encoding is supported
10 iconv.encodingExists("us-ascii")
\end{DoxyCode}


\#\#\# Streaming A\+P\+I (Node v0.\+10+) 
\begin{DoxyCode}
1 // Decode stream (from binary stream to js strings)
2 http.createServer(function(req, res) \{
3     var converterStream = iconv.decodeStream('win1251');
4     req.pipe(converterStream);
5 
6     converterStream.on('data', function(str) \{
7         console.log(str); // Do something with decoded strings, chunk-by-chunk.
8     \});
9 \});
10 
11 // Convert encoding streaming example
12 fs.createReadStream('file-in-win1251.txt')
13     .pipe(iconv.decodeStream('win1251'))
14     .pipe(iconv.encodeStream('ucs2'))
15     .pipe(fs.createWriteStream('file-in-ucs2.txt'));
16 
17 // Sugar: all encode/decode streams have .collect(cb) method to accumulate data.
18 http.createServer(function(req, res) \{
19     req.pipe(iconv.decodeStream('win1251')).collect(function(err, body) \{
20         assert(typeof body == 'string');
21         console.log(body); // full request body string
22     \});
23 \});
\end{DoxyCode}


\#\#\# Extend Node.\+js own encodings 
\begin{DoxyCode}
1 // After this call all Node basic primitives will understand iconv-lite encodings.
2 iconv.extendNodeEncodings();
3 
4 // Examples:
5 buf = new Buffer(str, 'win1251');
6 buf.write(str, 'gbk');
7 str = buf.toString('latin1');
8 assert(Buffer.isEncoding('iso-8859-15'));
9 Buffer.byteLength(str, 'us-ascii');
10 
11 http.createServer(function(req, res) \{
12     req.setEncoding('big5');
13     req.collect(function(err, body) \{
14         console.log(body);
15     \});
16 \});
17 
18 fs.createReadStream("file.txt", "shift\_jis");
19 
20 // External modules are also supported (if they use Node primitives, which they probably do).
21 request = require('request');
22 request(\{
23     url: "http://github.com/", 
24     encoding: "cp932"
25 \});
26 
27 // To remove extensions
28 iconv.undoExtendNodeEncodings();
\end{DoxyCode}


\subsection*{Supported encodings}


\begin{DoxyItemize}
\item All node.\+js native encodings\+: utf8, ucs2 / utf16-\/le, ascii, binary, base64, hex.
\item Additional unicode encodings\+: utf16, utf16-\/be, utf-\/7, utf-\/7-\/imap.
\item All widespread singlebyte encodings\+: Windows 125x family, I\+S\+O-\/8859 family, I\+B\+M/\+D\+O\+S codepages, Macintosh family, K\+O\+I8 family, all others supported by iconv library. Aliases like \textquotesingle{}latin1\textquotesingle{}, \textquotesingle{}us-\/ascii\textquotesingle{} also supported.
\item All widespread multibyte encodings\+: C\+P932, C\+P936, C\+P949, C\+P950, G\+B2313, G\+B\+K, G\+B18030, Big5, Shift\+\_\+\+J\+I\+S, E\+U\+C-\/\+J\+P.
\end{DoxyItemize}

See \href{https://github.com/ashtuchkin/iconv-lite/wiki/Supported-Encodings}{\tt all supported encodings on wiki}.

Most singlebyte encodings are generated automatically from \href{https://github.com/bnoordhuis/node-iconv}{\tt node-\/iconv}. Thank you Ben Noordhuis and libiconv authors!

Multibyte encodings are generated from \href{http://www.unicode.org/Public/MAPPINGS/}{\tt Unicode.\+org mappings} and \href{http://encoding.spec.whatwg.org/}{\tt W\+H\+A\+T\+W\+G Encoding Standard mappings}. Thank you, respective authors!

\subsection*{Encoding/decoding speed}

Comparison with node-\/iconv module (1000x256kb, on Mac\+Book Pro, Core i5/2.\+6 G\+Hz, Node v0.\+12.\+0). Note\+: your results may vary, so please always check on your hardware. \begin{DoxyVerb}operation             iconv@2.1.4   iconv-lite@0.4.7
----------------------------------------------------------
encode('win1251')     ~96 Mb/s      ~320 Mb/s
decode('win1251')     ~95 Mb/s      ~246 Mb/s
\end{DoxyVerb}


\subsection*{Notes}

When decoding, be sure to supply a Buffer to decode() method, otherwise \href{https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding}{\tt bad things usually happen}. Untranslatable characters are set to ï¿½ or ?. No transliteration is currently supported. Uses B\+O\+M to determine endianness, but doesn\textquotesingle{}t remove it. Use \href{https://github.com/sindresorhus/strip-bom}{\tt \textquotesingle{}strip-\/bom\textquotesingle{} module}. Node versions 0.\+10.\+31 and 0.\+11.\+13 are buggy, don\textquotesingle{}t use them (see \#65, \#77).

\subsection*{Testing}


\begin{DoxyCode}
1 $ git clone git@github.com:ashtuchkin/iconv-lite.git
2 $ cd iconv-lite
3 $ npm install
4 $ npm test
5 
6 $ # To view performance:
7 $ node test/performance.js
8 
9 $ # To view test coverage:
10 $ npm run coverage
11 $ open coverage/lcov-report/index.html
\end{DoxyCode}


\subsection*{Adoption}

\href{https://nodei.co/npm/iconv-lite/}{\tt !\mbox{[}N\+P\+M\mbox{]}(https\+://nodei.\+co/npm-\/dl/iconv-\/lite.\+png)} \href{https://www.codeship.io/projects/29053}{\tt !\mbox{[}Codeship Status for ashtuchkin/iconv-\/lite\mbox{]}(https\+://www.\+codeship.\+io/projects/81670840-\/fa72-\/0131-\/4520-\/4a01a6c01acc/status)} 