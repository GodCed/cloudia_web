\href{https://npmjs.org/package/ee-first}{\tt !\mbox{[}N\+P\+M version\mbox{]}\mbox{[}npm-\/image\mbox{]}} \href{https://travis-ci.org/jonathanong/ee-first}{\tt !\mbox{[}Build status\mbox{]}\mbox{[}travis-\/image\mbox{]}} \href{https://coveralls.io/r/jonathanong/ee-first?branch=master}{\tt !\mbox{[}Test coverage\mbox{]}\mbox{[}coveralls-\/image\mbox{]}} !\mbox{[}License\mbox{]}\mbox{[}license-\/image\mbox{]} \href{https://npmjs.org/package/ee-first}{\tt !\mbox{[}Downloads\mbox{]}\mbox{[}downloads-\/image\mbox{]}} \href{https://www.gittip.com/jonathanong/}{\tt !\mbox{[}Gittip\mbox{]}\mbox{[}gittip-\/image\mbox{]}}

Get the first event in a set of event emitters and event pairs, then clean up after itself.

\subsection*{Install}


\begin{DoxyCode}
1 $ npm install ee-first
\end{DoxyCode}


\subsection*{A\+P\+I}


\begin{DoxyCode}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} first = require(\textcolor{stringliteral}{'ee-first'})
\end{DoxyCode}


\subsubsection*{first(arr, listener)}

Invoke {\ttfamily listener} on the first event from the list specified in {\ttfamily arr}. {\ttfamily arr} is an array of arrays, with each array in the format {\ttfamily \mbox{[}ee, ...event\mbox{]}}. {\ttfamily listener} will be called only once, the first time any of the given events are emitted. If {\ttfamily error} is one of the listened events, then if that fires first, the {\ttfamily listener} will be given the {\ttfamily err} argument.

The {\ttfamily listener} is invoked as {\ttfamily listener(err, ee, event, args)}, where {\ttfamily err} is the first argument emitted from an {\ttfamily error} event, if applicable; {\ttfamily ee} is the event emitter that fired; {\ttfamily event} is the string event name that fired; and {\ttfamily args} is an array of the arguments that were emitted on the event.


\begin{DoxyCode}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} ee1 = \textcolor{keyword}{new} EventEmitter()
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} ee2 = new EventEmitter()

first([
  [ee1, '\hyperlink{structcmd_8h_ae152484c890a24e4d9b4980e7b965be0}{close}', 'end', 'error'],
  [ee2, 'error']
], \hyperlink{class_test_a51a683fa4fcec142ab1574e00a7b6860}{function} (err, ee, event, args) \{
  \textcolor{comment}{// listener invoked}
\})
\end{DoxyCode}


\paragraph*{.cancel()}

The group of listeners can be cancelled before being invoked and have all the event listeners removed from the underlying event emitters.


\begin{DoxyCode}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} thunk = first([
  [ee1, \textcolor{stringliteral}{'close'}, \textcolor{stringliteral}{'end'}, \textcolor{stringliteral}{'error'}],
  [ee2, \textcolor{stringliteral}{'error'}]
], \textcolor{keyword}{function} (err, ee, event, args) \{
  \textcolor{comment}{// listener invoked}
\})

\textcolor{comment}{// cancel and clean up}
thunk.cancel()
\end{DoxyCode}
 