\href{https://npmjs.org/package/content-disposition}{\tt !\mbox{[}N\+P\+M Version\mbox{]}\mbox{[}npm-\/image\mbox{]}} \href{https://npmjs.org/package/content-disposition}{\tt !\mbox{[}N\+P\+M Downloads\mbox{]}\mbox{[}downloads-\/image\mbox{]}} \href{http://nodejs.org/download/}{\tt !\mbox{[}Node.\+js Version\mbox{]}\mbox{[}node-\/version-\/image\mbox{]}} \href{https://travis-ci.org/jshttp/content-disposition}{\tt !\mbox{[}Build Status\mbox{]}\mbox{[}travis-\/image\mbox{]}} \href{https://coveralls.io/r/jshttp/content-disposition?branch=master}{\tt !\mbox{[}Test Coverage\mbox{]}\mbox{[}coveralls-\/image\mbox{]}}

Create and parse H\+T\+T\+P {\ttfamily Content-\/\+Disposition} header

\subsection*{Installation}


\begin{DoxyCode}
1 $ npm install content-disposition
\end{DoxyCode}


\subsection*{A\+P\+I}


\begin{DoxyCode}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} contentDisposition = require(\textcolor{stringliteral}{'content-disposition'})
\end{DoxyCode}


\subsubsection*{content\+Disposition(filename, options)}

Create an attachment {\ttfamily Content-\/\+Disposition} header value using the given file name, if supplied. The {\ttfamily filename} is optional and if no file name is desired, but you want to specify {\ttfamily options}, set {\ttfamily filename} to {\ttfamily undefined}.


\begin{DoxyCode}
res.setHeader(\textcolor{stringliteral}{'Content-Disposition'}, contentDisposition(\textcolor{stringliteral}{'∫ maths.pdf'}))
\end{DoxyCode}


{\bfseries note} H\+T\+T\+P headers are of the I\+S\+O-\/8859-\/1 character set. If you are writing this header through a means different from {\ttfamily set\+Header} in Node.\+js, you\textquotesingle{}ll want to specify the {\ttfamily \textquotesingle{}binary\textquotesingle{}} encoding in Node.\+js.

\paragraph*{Options}

{\ttfamily content\+Disposition} accepts these properties in the options object.

\subparagraph*{fallback}

If the {\ttfamily filename} option is outside I\+S\+O-\/8859-\/1, then the file name is actually stored in a supplemental field for clients that support Unicode file names and a I\+S\+O-\/8859-\/1 version of the file name is automatically generated.

This specifies the I\+S\+O-\/8859-\/1 file name to override the automatic generation or disables the generation all together, defaults to {\ttfamily true}.


\begin{DoxyItemize}
\item \hyperlink{class_a}{A} string will specify the I\+S\+O-\/8859-\/1 file name to use in place of automatic generation.
\item {\ttfamily false} will disable including a I\+S\+O-\/8859-\/1 file name and only include the Unicode version (unless the file name is already I\+S\+O-\/8859-\/1).
\item {\ttfamily true} will enable automatic generation if the file name is outside I\+S\+O-\/8859-\/1.
\end{DoxyItemize}

If the {\ttfamily filename} option is I\+S\+O-\/8859-\/1 and this option is specified and has a different value, then the {\ttfamily filename} option is encoded in the extended field and this set as the fallback field, even though they are both I\+S\+O-\/8859-\/1.

\subparagraph*{type}

Specifies the disposition type, defaults to {\ttfamily \char`\"{}attachment\char`\"{}}. This can also be {\ttfamily \char`\"{}inline\char`\"{}}, or any other value (all values except inline are treated like {\ttfamily attachment}, but can convey additional information if both parties agree to it). The type is normalized to lower-\/case.

\subsubsection*{content\+Disposition.\+parse(string)}


\begin{DoxyCode}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} disposition = contentDisposition.parse(\textcolor{stringliteral}{'attachment; filename="EURO rates.txt"; filename*=UTF-8\(\backslash\)'\(\backslash\)'
      %e2%82%ac%20rates.txt"'});
\end{DoxyCode}


Parse a {\ttfamily Content-\/\+Disposition} header string. This automatically handles extended (\char`\"{}\+Unicode\char`\"{}) parameters by decoding them and providing them under the standard parameter name. This will return an object with the following properties (examples are shown for the string `\textquotesingle{}attachment; filename=\char`\"{}\+E\+U\+R\+O rates.\+txt\char`\"{}; filename$\ast$=U\+T\+F-\/8\textbackslash{}\textquotesingle{}\textbackslash{}\textquotesingle{}e2\%82ac\%20rates.\+txt\textquotesingle{}`)\+:


\begin{DoxyItemize}
\item {\ttfamily type}\+: The disposition type (always lower case). \hyperlink{struct_example}{Example}\+: {\ttfamily \textquotesingle{}attachment\textquotesingle{}}
\item {\ttfamily parameters}\+: An object of the parameters in the disposition (name of parameter always lower case and extended versions replace non-\/extended versions). \hyperlink{struct_example}{Example}\+: {\ttfamily \{filename\+: \char`\"{}€ rates.\+txt\char`\"{}\}}
\end{DoxyItemize}

\subsection*{Examples}

\subsubsection*{Send a file for download}


\begin{DoxyCode}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} contentDisposition = require(\textcolor{stringliteral}{'content-disposition'})
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} destroy = require('destroy')
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} http = require('http')
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} onFinished = require('on-finished')

\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} filePath = '/path/to/public/plans.pdf'

http.createServer(\hyperlink{class_test_a51a683fa4fcec142ab1574e00a7b6860}{function} onRequest(req, res) \{
  \textcolor{comment}{// set headers}
  res.setHeader(\textcolor{stringliteral}{'Content-Type'}, \textcolor{stringliteral}{'application/pdf'})
  res.setHeader(\textcolor{stringliteral}{'Content-Disposition'}, contentDisposition(filePath))

  \textcolor{comment}{// send file}
  \hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} stream = fs.createReadStream(filePath)
  stream.pipe(res)
  onFinished(res, \textcolor{keyword}{function} (\hyperlink{message_8cpp_aede5746344fdce99647541101eaa7f06}{err}) \{
    destroy(stream)
  \})
\})
\end{DoxyCode}


\subsection*{Testing}


\begin{DoxyCode}
1 $ npm test
\end{DoxyCode}


\subsection*{References}


\begin{DoxyItemize}
\item \href{https://tools.ietf.org/html/rfc2616}{\tt R\+F\+C 2616\+: Hypertext Transfer Protocol -\/-\/ H\+T\+T\+P/1.\+1}
\item \href{https://tools.ietf.org/html/rfc5987}{\tt R\+F\+C 5987\+: Character Set and Language Encoding for Hypertext Transfer Protocol (H\+T\+T\+P) Header Field Parameters}
\item \href{https://tools.ietf.org/html/rfc6266}{\tt R\+F\+C 6266\+: Use of the Content-\/\+Disposition Header Field in the Hypertext Transfer Protocol (H\+T\+T\+P)}
\item \href{http://greenbytes.de/tech/tc2231/}{\tt Test Cases for H\+T\+T\+P Content-\/\+Disposition header field (R\+F\+C 6266) and the Encodings defined in R\+F\+Cs 2047, 2231 and 5987}
\end{DoxyItemize}

\subsection*{License}

\mbox{[}M\+I\+T\mbox{]}(L\+I\+C\+E\+N\+S\+E) 