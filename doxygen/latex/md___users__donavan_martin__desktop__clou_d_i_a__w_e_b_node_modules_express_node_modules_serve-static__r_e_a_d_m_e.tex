\href{https://npmjs.org/package/serve-static}{\tt !\mbox{[}N\+P\+M Version\mbox{]}\mbox{[}npm-\/image\mbox{]}} \href{https://npmjs.org/package/serve-static}{\tt !\mbox{[}N\+P\+M Downloads\mbox{]}\mbox{[}downloads-\/image\mbox{]}} \href{https://travis-ci.org/expressjs/serve-static}{\tt !\mbox{[}Linux Build\mbox{]}\mbox{[}travis-\/image\mbox{]}} \href{https://ci.appveyor.com/project/dougwilson/serve-static}{\tt !\mbox{[}Windows Build\mbox{]}\mbox{[}appveyor-\/image\mbox{]}} \href{https://coveralls.io/r/expressjs/serve-static}{\tt !\mbox{[}Test Coverage\mbox{]}\mbox{[}coveralls-\/image\mbox{]}} \href{https://gratipay.com/dougwilson/}{\tt !\mbox{[}Gratipay\mbox{]}\mbox{[}gratipay-\/image\mbox{]}}

\subsection*{Install}


\begin{DoxyCode}
1 $ npm install serve-static
\end{DoxyCode}


\subsection*{A\+P\+I}


\begin{DoxyCode}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} serveStatic = require(\textcolor{stringliteral}{'serve-static'})
\end{DoxyCode}


\subsubsection*{serve\+Static(root, options)}

Create a new middleware function to serve files from within a given root directory. The file to serve will be determined by combining {\ttfamily req.\+url} with the provided root directory. When a file is not found, instead of sending a 404 response, this module will instead call {\ttfamily \hyperlink{057__caller__graphs_8tcl_a3f808a00e1b937978455d707851ab33a}{next()}} to move on to the next middleware, allowing for stacking and fall-\/backs.

\paragraph*{Options}

\subparagraph*{dotfiles}

Set how \char`\"{}dotfiles\char`\"{} are treated when encountered. \hyperlink{class_a}{A} dotfile is a file or directory that begins with a dot (\char`\"{}.\char`\"{}). Note this check is done on the path itself without checking if the path actually exists on the disk. If {\ttfamily root} is specified, only the dotfiles above the root are checked (i.\+e. the root itself can be within a dotfile when set to \char`\"{}deny\char`\"{}).

The default value is {\ttfamily \textquotesingle{}ignore\textquotesingle{}}.


\begin{DoxyItemize}
\item {\ttfamily \textquotesingle{}allow\textquotesingle{}} No special treatment for dotfiles.
\item {\ttfamily \textquotesingle{}deny\textquotesingle{}} Send a 403 for any request for a dotfile.
\item {\ttfamily \textquotesingle{}ignore\textquotesingle{}} Pretend like the dotfile does not exist and call {\ttfamily \hyperlink{057__caller__graphs_8tcl_a3f808a00e1b937978455d707851ab33a}{next()}}.
\end{DoxyItemize}

\subparagraph*{etag}

Enable or disable etag generation, defaults to true.

\subparagraph*{extensions}

Set file extension fallbacks. When set, if a file is not found, the given extensions will be added to the file name and search for. The first that exists will be served. \hyperlink{struct_example}{Example}\+: `\mbox{[}\textquotesingle{}html\textquotesingle{}, \textquotesingle{}htm\textquotesingle{}\mbox{]}`.

The default value is {\ttfamily false}.

\subparagraph*{index}

By default this module will send \char`\"{}index.\+html\char`\"{} files in response to a request on a directory. To disable this set {\ttfamily false} or to supply a new index pass a string or an array in preferred order.

\subparagraph*{last\+Modified}

Enable or disable {\ttfamily Last-\/\+Modified} header, defaults to true. Uses the file system\textquotesingle{}s last modified value.

\subparagraph*{max\+Age}

Provide a max-\/age in milliseconds for http caching, defaults to 0. This can also be a string accepted by the \href{https://www.npmjs.org/package/ms#readme}{\tt ms} module.

\subparagraph*{redirect}

Redirect to trailing \char`\"{}/\char`\"{} when the pathname is a dir. Defaults to {\ttfamily true}.

\subparagraph*{set\+Headers}

Function to set custom headers on response. Alterations to the headers need to occur synchronously. The function is called as {\ttfamily fn(res, path, stat)}, where the arguments are\+:


\begin{DoxyItemize}
\item {\ttfamily res} the response object
\item {\ttfamily path} the file path that is being sent
\item {\ttfamily stat} the stat object of the file that is being sent
\end{DoxyItemize}

\subsection*{Examples}

\subsubsection*{Serve files with vanilla node.\+js http server}


\begin{DoxyCode}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} finalhandler = require(\textcolor{stringliteral}{'finalhandler'})
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} http = require('http')
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} serveStatic = require('serve-static')

\textcolor{comment}{// Serve up public/ftp folder}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} serve = serveStatic('public/ftp', \{\textcolor{stringliteral}{'index'}: [\textcolor{stringliteral}{'index.html'}, \textcolor{stringliteral}{'index.htm'}]\})

\textcolor{comment}{// Create server}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} server = http.createServer(\textcolor{keyword}{function}(req, res)\{
  var done = finalhandler(req, res)
  serve(req, res, done)
\})

\textcolor{comment}{// Listen}
server.listen(3000)
\end{DoxyCode}


\subsubsection*{Serve all files as downloads}


\begin{DoxyCode}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} contentDisposition = require(\textcolor{stringliteral}{'content-disposition'})
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} finalhandler = require('finalhandler')
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} http = require('http')
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} serveStatic = require('serve-static')

\textcolor{comment}{// Serve up public/ftp folder}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} serve = serveStatic('public/ftp', \{
  \textcolor{stringliteral}{'index'}: \textcolor{keyword}{false},
  \textcolor{stringliteral}{'setHeaders'}: setHeaders
\})

\textcolor{comment}{// Set header to force download}
\textcolor{keyword}{function} setHeaders(res, path) \{
  res.setHeader(\textcolor{stringliteral}{'Content-Disposition'}, contentDisposition(path))
\}

\textcolor{comment}{// Create server}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} server = http.createServer(\textcolor{keyword}{function}(req, res)\{
  \hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} done = finalhandler(req, res)
  serve(req, res, done)
\})

\textcolor{comment}{// Listen}
server.listen(3000)
\end{DoxyCode}


\subsubsection*{Serving using express}

\paragraph*{Simple}

This is a simple example of using Express.


\begin{DoxyCode}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} express = require(\textcolor{stringliteral}{'express'})
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} serveStatic = require('serve-static')

\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} app = express()

app.use(serveStatic('public/ftp', \{\textcolor{stringliteral}{'index'}: [\textcolor{stringliteral}{'default.html'}, \textcolor{stringliteral}{'default.htm'}]\}))
app.listen(3000)
\end{DoxyCode}


\paragraph*{Multiple roots}

This example shows a simple way to search through multiple directories. Files are look for in {\ttfamily public-\/optimized/} first, then {\ttfamily public/} second as a fallback.


\begin{DoxyCode}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} express = require(\textcolor{stringliteral}{'express'})
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} serveStatic = require('serve-static')

\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} app = express()

app.use(serveStatic(\_\_dirname + '/public-optimized'))
app.use(serveStatic(\_\_dirname + '/public'))
app.listen(3000)
\end{DoxyCode}


\paragraph*{Different settings for paths}

This example shows how to set a different max age depending on the served file type. In this example, H\+T\+M\+L files are not cached, while everything else is for 1 day.


\begin{DoxyCode}
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} express = require(\textcolor{stringliteral}{'express'})
\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} serveStatic = require('serve-static')

\hyperlink{018__def_8c_a335628f2e9085305224b4f9cc6e95ed5}{var} app = express()

app.use(serveStatic(\_\_dirname + '/public', \{
  maxAge: \textcolor{stringliteral}{'1d'},
  setHeaders: setCustomCacheControl
\}))

app.listen(3000)

\hyperlink{class_test_a51a683fa4fcec142ab1574e00a7b6860}{function} setCustomCacheControl(res, path) \{
  \textcolor{keywordflow}{if} (serveStatic.mime.lookup(path) === \textcolor{stringliteral}{'text/html'}) \{
    \textcolor{comment}{// Custom Cache-Control for HTML files}
    res.setHeader(\textcolor{stringliteral}{'Cache-Control'}, \textcolor{stringliteral}{'public, max-age=0'})
  \}
\}
\end{DoxyCode}


\subsection*{License}

\mbox{[}M\+I\+T\mbox{]}(L\+I\+C\+E\+N\+S\+E) 